<style>
.dictionary-container {
  max-width: 500px;
  margin: auto;
  padding: 10px;
  font-family: Arial, sans-serif;
}

.date-nav {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 20px;
  font-weight: bold;
  font-size: 1.2em;
  margin-bottom: 15px;
  color: #007acc;
}

.nav-arrow {
  cursor: pointer;
  font-size: 1.3em;
}

.entry {
  margin-bottom: 12px;
  padding: 10px;
  border-radius: 8px;
  background-color: #f0f8ff;
}

.word {
  font-weight: bold;
  font-size: 1.2em;
  color: #004080;
}

.pronunciation {
  font-style: italic;
  color: #555;
  font-size: 0.95em;
}

.meaning {
  margin-top: 5px;
}
</style>

<div class="dictionary-container">
  <div class="date-nav">
    <span class="nav-arrow" id="prev">&larr;</span>
    <span id="current-date">26 Aug 2025</span>
    <span class="nav-arrow" id="next">&rarr;</span>
  </div>
  <div id="word-list"></div>
</div>

<script>
// Google Sheet CSV URL
const sheetCSV = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQsGIvL6Tfe9VMLQxiNtLVflhrTA1GcTKYtouNCqDTHpiA6G7Id3QilvntH5xIICpTrRuQyNGW_ouZi/pub?output=csv";

// Convert date string to comparable format
function formatDate(date) {
  return new Date(date).toISOString().split('T')[0];
}

let allWords = [];
let currentDate = new Date(); // starts with today's date
  
// Fetch CSV from Google Sheets
fetch(sheetCSV)
  .then(response => response.text())
  .then(csvText => {
    const rows = csvText.split('\n').slice(1); // skip header
    allWords = rows.map(row => {
      const cols = row.split(',');
      return {
        date: cols[0],
        word: cols[1],
        pronunciation: cols[2],
        meaning: cols[3]
      };
    });
    displayWords();
  });

// Display words for currentDate
function displayWords() {
  const dateStr = formatDate(currentDate);
  document.getElementById("current-date").innerText = new Date(currentDate).toDateString();
  const wordListDiv = document.getElementById("word-list");
  wordListDiv.innerHTML = "";
  
  const todayWords = allWords.filter(w => formatDate(w.date) === dateStr);
  
  todayWords.forEach(w => {
    const entry = document.createElement("div");
    entry.className = "entry";
    entry.innerHTML = `<div class="word">${w.word}</div>
                       <div class="pronunciation">${w.pronunciation}</div>
                       <div class="meaning">${w.meaning}</div>`;
    wordListDiv.appendChild(entry);
  });
}

// Arrow navigation
document.getElementById("prev").addEventListener("click", () => {
  currentDate.setDate(currentDate.getDate() - 1);
  displayWords();
});

document.getElementById("next").addEventListener("click", () => {
  currentDate.setDate(currentDate.getDate() + 1);
  displayWords();
});
</script>
